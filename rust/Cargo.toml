[package]
name        = "bath"
version     = "0.1.0"
edition     = "2021"

[lib]
name       = "bath"
crate-type = ["cdylib"]

[[bin]]
name = "bath_bin"
path = "src/main.rs"

[dependencies]
hound          = "3.4.0"
rustysynth     = "1.3.5"
#TODO: this uses rayon in parallel feature, so for testing with no threads on
# web disable and only target std and alloc
midly = { version = "0.5.3", default-features = false, features = ["std", "alloc"] }
#midly          = "0.5.3"
#ogg            = "0.9.2"
vorbis         = "0.1"
terminal_size  = "0.4.2"

#TODO: figure out how to put up target flags in the actual lib.rs for wasm keystrokes(rdev)
# and c-binding related aubio-sys and midi device (midir) related compile blocking
[target.'cfg(not(target_arch = "wasm32"))'.dependencies]
#rspleeter = { git = "https://github.com/ldm0/rspleeter.git", branch = "master" }
rdev           = "0.5.3"
aubio-rs       = { version = "0.2.0", default-features = false, features = ["bindgen"] }
midir          = "0.10.1"

[dependencies.godot]
git      = "https://github.com/godot-rust/gdext"
branch   = "master"
features = ["experimental-wasm", "lazy-function-tables"]#, "experimental-wasm-nothreads"]
